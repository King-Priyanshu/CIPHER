# ðŸ—„ï¸ Database Schema Documentation

This document references the actual implementation of the **CIPHER** database.
**Total Tables**: 14
**Database Type**: MySQL / PostgreSQL Compatible

---

## 1. Authentication & Users

### `users`
Core user table (Admins & Subscribers).
- `id`: Primary Key
- `role_id`: FK to `roles`
- `name`, `email`, `password`
- `terms_accepted_at`: Legal compliance
- `email_verified_at`: Security

### `roles`
RBAC (Role-Based Access Control) definitions.
- `id`: Primary Key
- `name`: Display name (e.g., "Administrator")
- `slug`: System name (e.g., "admin", "subscriber")

### `activity_logs`
Audit trail for security.
- `user_id`: Who performed the action
- `action`: What happened (e.g., "payment_succeeded")
- `description`: Details
- `ip_address`: Security tracking

---

## 2. Subscriptions & Billing

### `subscription_plans`
Defines available tiers.
- `id`, `name`, `slug`, `price`, `interval` (monthly/annual)
- `is_active`: Soft delete capability

### `user_subscriptions`
Tracks user enrollment.
- `user_id`: The subscriber
- `plan_id`: The plan
- `status`: active, cancelled, expired, trialing
- `starts_at`, `ends_at`, `cancelled_at`

### `payments`
Record of all money coming in.
- `user_id`
- `subscription_id`
- `amount`, `currency`
- `gateway`: Stripe/Razorpay
- `transaction_id`: External ID
- `status`: succeeded, failed

### `invoices`
Legal proof of payment.
- `payment_id`
- `invoice_number`
- `pdf_url` (optional for storage path)
- `tax`, `total`

---

## 3. Projects & Funds

### `projects`
Real-world ventures funded by the pool.
- `title`, `slug`, `description`
- `fund_goal`: Target amount
- `current_fund`: Amount allocated
- `status`: draft, active, completed

### `project_updates`
News feed for a project.
- `project_id`
- `title`, `content`
- `published_at`

### `fund_pools`
Monthly/Quarterly buckets of user money.
- `name`: "January 2026 Pool"
- `total_amount`: Aggregated from subscriptions
- `allocated_amount`: How much sent to projects

### `fund_allocations`
Junction table linking Pools -> Projects.
- `fund_pool_id`
- `project_id`
- `amount`: How much this project got from this pool

---

## 4. Rewards

### `reward_pools`
Profits generated by a Project ready for distribution.
- `project_id`: Source of funds
- `total_amount`: Total profit to split
- `status`: calculating, distributed

### `rewards`
Individual user share of the pool.
- `user_id`: Recipient
- `reward_pool_id`: Source
- `amount`: User's cut
- `status`: pending, distributed

---

## 5. Content Management

### `content_pages`
Static pages (About, Terms, Privacy).
- `slug`: URL identifier
- `title`, `content` (HTML/Markdown)
- `meta_title`, `meta_description`: SEO tags
- `is_published`: Visibility toggle

---

## ðŸ”— Key Relationships

- **User** `hasOne` **Subscription**
- **User** `hasMany` **Payments**
- **User** `hasMany` **Rewards**
- **Project** `hasMany` **Allocations** (from Fund Pools)
- **Project** `hasMany` **RewardPools** (money returned)
